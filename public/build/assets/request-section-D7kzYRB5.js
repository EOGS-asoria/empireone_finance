import{r as l,j as o,u as le,c as ce,s as K,e as Q}from"./app-dP_z_fnk.js";import{h as X}from"./moment-C5S46NFB.js";import pe from"./request-calculation-section-aYl1cLeA.js";import{s as de,a as ue}from"./loan-record-thunk-C4ZBVTOa.js";import me from"./loan-agreement-section-C_twqB9k.js";import ve from"./promissory-note-section-DiV6MY97.js";import{T as xe}from"./Toolbar-B_MAfYSj.js";import{F as fe,I as be,S as Se,a as he,T as Ce}from"./TextField-CaQO6EmX.js";import{M as w}from"./MenuItem-IQ1Mm9Da.js";import{B as k}from"./Button-vVkDZ5qZ.js";import{D as ge}from"./Dialog-C7gflt8u.js";import{C as ae,B as Z}from"./Box-DiCXhS_y.js";import{g as $,a as A,s as j,u as D,c as F,b as U,m as B,d as se}from"./DefaultPropsProvider-CsXFCh0-.js";import{u as ee}from"./useSlot-Cbms-XDJ.js";import{c as re,S as Le}from"./createSvgIcon-Cp-50FUN.js";import{T as q}from"./Typography-B_CPnTsD.js";import{F as te}from"./FormControlLabel-BI_4b1sB.js";import{C as oe}from"./Checkbox-rP87vWtM.js";import{P as ye}from"./Paper-B-2IUVeE.js";import"./Close-DYdq3vQE.js";import"./TableRow-kScVK0Qx.js";import"./IconButton-BRSUSFoS.js";import"./createSimplePaletteValueFilter-Bgv203Gg.js";import"./InputBase-nc_-WVBt.js";import"./isHostComponent-DVu5iVWx.js";import"./index-EqUvMg9Z.js";import"./useTheme-CyRo7N0D.js";import"./extendSxProp-OJ4AWB0Z.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./debounce-Be36O1Ab.js";import"./Popover-V040IlCe.js";import"./Modal-WIWjtJar.js";import"./utils-C-nDyjYJ.js";import"./Grow-HSTwU_fs.js";import"./useThemeProps-CKOdREzu.js";import"./listItemTextClasses-4P8OQ-pR.js";const E=l.createContext({}),H=l.createContext({});function je(e){return $("MuiStep",e)}A("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Me=e=>{const{classes:n,orientation:t,alternativeLabel:s,completed:r}=e;return U({root:["root",t,s&&"alternativeLabel",r&&"completed"]},je,n)},Re=j("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,n[t.orientation],t.alternativeLabel&&n.alternativeLabel,t.completed&&n.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),_e=l.forwardRef(function(n,t){const s=D({props:n,name:"MuiStep"}),{active:r,children:i,className:a,component:c="div",completed:v,disabled:m,expanded:d=!1,index:u,last:x,...b}=s,{activeStep:f,connector:h,alternativeLabel:R,orientation:_,nonLinear:I}=l.useContext(E);let[g=!1,N=!1,M=!1]=[r,v,m];f===u?g=r!==void 0?r:!0:!I&&f>u?N=v!==void 0?v:!0:!I&&f<u&&(M=m!==void 0?m:!0);const z=l.useMemo(()=>({index:u,last:x,expanded:d,icon:u+1,active:g,completed:N,disabled:M}),[u,x,d,g,N,M]),C={...s,active:g,orientation:_,alternativeLabel:R,completed:N,disabled:M,expanded:d,component:c},P=Me(C),p=o.jsxs(Re,{as:c,className:F(P.root,a),ref:t,ownerState:C,...b,children:[h&&R&&u!==0?h:null,i]});return o.jsx(H.Provider,{value:z,children:h&&!R&&u!==0?o.jsxs(l.Fragment,{children:[h,p]}):p})}),Ie=re(o.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Ne=re(o.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Pe(e){return $("MuiStepIcon",e)}const Y=A("MuiStepIcon",["root","active","completed","error","text"]);var ne;const we=e=>{const{classes:n,active:t,completed:s,error:r}=e;return U({root:["root",t&&"active",s&&"completed",r&&"error"],text:["text"]},Pe,n)},O=j(Le,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,n)=>n.root})(B(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${Y.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${Y.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${Y.error}`]:{color:(e.vars||e).palette.error.main}}))),Te=j("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,n)=>n.text})(B(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily}))),ze=l.forwardRef(function(n,t){const s=D({props:n,name:"MuiStepIcon"}),{active:r=!1,className:i,completed:a=!1,error:c=!1,icon:v,...m}=s,d={...s,active:r,completed:a,error:c},u=we(d);if(typeof v=="number"||typeof v=="string"){const x=F(i,u.root);return c?o.jsx(O,{as:Ne,className:x,ref:t,ownerState:d,...m}):a?o.jsx(O,{as:Ie,className:x,ref:t,ownerState:d,...m}):o.jsxs(O,{className:x,ref:t,ownerState:d,...m,children:[ne||(ne=o.jsx("circle",{cx:"12",cy:"12",r:"12"})),o.jsx(Te,{className:u.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:d,children:v})]})}return v});function Fe(e){return $("MuiStepLabel",e)}const T=A("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),ke=e=>{const{classes:n,orientation:t,active:s,completed:r,error:i,disabled:a,alternativeLabel:c}=e;return U({root:["root",t,i&&"error",a&&"disabled",c&&"alternativeLabel"],label:["label",s&&"active",r&&"completed",i&&"error",a&&"disabled",c&&"alternativeLabel"],iconContainer:["iconContainer",s&&"active",r&&"completed",i&&"error",a&&"disabled",c&&"alternativeLabel"],labelContainer:["labelContainer",c&&"alternativeLabel"]},Fe,n)},$e=j("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,n[t.orientation]]}})({display:"flex",alignItems:"center",[`&.${T.alternativeLabel}`]:{flexDirection:"column"},[`&.${T.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),Ae=j("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,n)=>n.label})(B(({theme:e})=>({...e.typography.body2,display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${T.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${T.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${T.alternativeLabel}`]:{marginTop:16},[`&.${T.error}`]:{color:(e.vars||e).palette.error.main}}))),De=j("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,n)=>n.iconContainer})({flexShrink:0,display:"flex",paddingRight:8,[`&.${T.alternativeLabel}`]:{paddingRight:0}}),Ue=j("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,n)=>n.labelContainer})(B(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${T.alternativeLabel}`]:{textAlign:"center"}}))),G=l.forwardRef(function(n,t){const s=D({props:n,name:"MuiStepLabel"}),{children:r,className:i,componentsProps:a={},error:c=!1,icon:v,optional:m,slots:d={},slotProps:u={},StepIconComponent:x,StepIconProps:b,...f}=s,{alternativeLabel:h,orientation:R}=l.useContext(E),{active:_,disabled:I,completed:g,icon:N}=l.useContext(H),M=v||N;let z=x;M&&!z&&(z=ze);const C={...s,active:_,alternativeLabel:h,completed:g,disabled:I,error:c,orientation:R},P=ke(C),p={slots:d,slotProps:{stepIcon:b,...a,...u}},[L,y]=ee("label",{elementType:Ae,externalForwardedProps:p,ownerState:C}),[S,V]=ee("stepIcon",{elementType:z,externalForwardedProps:p,ownerState:C});return o.jsxs($e,{className:F(P.root,i),ref:t,ownerState:C,...f,children:[M||S?o.jsx(De,{className:P.iconContainer,ownerState:C,children:o.jsx(S,{completed:g,active:_,error:c,icon:M,...V})}):null,o.jsxs(Ue,{className:P.labelContainer,ownerState:C,children:[r?o.jsx(L,{...y,className:F(P.label,y==null?void 0:y.className),children:r}):null,m]})]})});G&&(G.muiName="StepLabel");function Be(e){return $("MuiStepConnector",e)}A("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Ee=e=>{const{classes:n,orientation:t,alternativeLabel:s,active:r,completed:i,disabled:a}=e,c={root:["root",t,s&&"alternativeLabel",r&&"active",i&&"completed",a&&"disabled"],line:["line",`line${se(t)}`]};return U(c,Be,n)},We=j("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,n[t.orientation],t.alternativeLabel&&n.alternativeLabel,t.completed&&n.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),He=j("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.line,n[`line${se(t.orientation)}`]]}})(B(({theme:e})=>{const n=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return{display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:n,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),Ve=l.forwardRef(function(n,t){const s=D({props:n,name:"MuiStepConnector"}),{className:r,...i}=s,{alternativeLabel:a,orientation:c="horizontal"}=l.useContext(E),{active:v,disabled:m,completed:d}=l.useContext(H),u={...s,alternativeLabel:a,orientation:c,active:v,completed:d,disabled:m},x=Ee(u);return o.jsx(We,{className:F(x.root,r),ref:t,ownerState:u,...i,children:o.jsx(He,{className:x.line,ownerState:u})})});function qe(e){return $("MuiStepContent",e)}A("MuiStepContent",["root","last","transition"]);const Ye=e=>{const{classes:n,last:t}=e;return U({root:["root",t&&"last"],transition:["transition"]},qe,n)},Oe=j("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.last&&n.last]}})(B(({theme:e})=>({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:e.vars?`1px solid ${e.vars.palette.StepContent.border}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}`,variants:[{props:{last:!0},style:{borderLeft:"none"}}]}))),Ge=j(ae,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,n)=>n.transition})({}),Je=l.forwardRef(function(n,t){const s=D({props:n,name:"MuiStepContent"}),{children:r,className:i,TransitionComponent:a=ae,transitionDuration:c="auto",TransitionProps:v,...m}=s;l.useContext(E);const{active:d,last:u,expanded:x}=l.useContext(H),b={...s,last:u},f=Ye(b);let h=c;return c==="auto"&&!a.muiSupportAuto&&(h=void 0),o.jsx(Oe,{className:F(f.root,i),ref:t,ownerState:b,...m,children:o.jsx(Ge,{as:a,in:d||x,className:f.transition,ownerState:b,timeout:h,unmountOnExit:!0,...v,children:r})})});function Ke(e){return $("MuiStepper",e)}A("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Qe=e=>{const{orientation:n,nonLinear:t,alternativeLabel:s,classes:r}=e;return U({root:["root",n,t&&"nonLinear",s&&"alternativeLabel"]},Ke,r)},Xe=j("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,n[t.orientation],t.alternativeLabel&&n.alternativeLabel,t.nonLinear&&n.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),Ze=o.jsx(Ve,{}),et=l.forwardRef(function(n,t){const s=D({props:n,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:i=!1,children:a,className:c,component:v="div",connector:m=Ze,nonLinear:d=!1,orientation:u="horizontal",...x}=s,b={...s,nonLinear:d,alternativeLabel:i,orientation:u,component:v},f=Qe(b),h=l.Children.toArray(a).filter(Boolean),R=h.map((I,g)=>l.cloneElement(I,{index:g,last:g+1===h.length,...I.props})),_=l.useMemo(()=>({activeStep:r,alternativeLabel:i,connector:m,nonLinear:d,orientation:u}),[r,i,m,d,u]);return o.jsx(E.Provider,{value:_,children:o.jsx(Xe,{as:v,ownerState:b,className:F(f.root,c),ref:t,...x,children:R})})});function Dt(){var P;const[e,n]=l.useState(!1),[t,s]=l.useState({term:3,desired_amount:null,interest:0,net:0,bi_amortization:0,interest_rate:.05,schedule:[]}),[r,i]=l.useState(0);l.useState([]);const[a,c]=l.useState({}),[v,m]=l.useState(!1),{user:d}=le(p=>p.app),u=ce(),x=parseFloat((P=d==null?void 0:d.salary)==null?void 0:P.budgetCost)*.8,[b,f]=l.useState({value1:!1,value2:!1});function h(p,L,y,S){const V=X().date(10),J=[];for(let W=0;W<S;W++){const ie=V.clone().add(Math.floor(W/2),"months").date(W%2===0?10:25);J.push({date:ie.format("LL"),payment:L.toFixed(2)})}return J}l.useEffect(()=>{const p=h(t.net,t.bi_amortization,t.term,6);s({...t,interest:(t.desired_amount??0)*(t.interest_rate??0)*(t.term??0),net:(t.desired_amount??0)-(t.desired_amount??0)*(t.interest_rate??0)*(t.term??0),bi_amortization:(t.desired_amount??0)/(t.term??1)/2,schedule:p,...d,balance:t.desired_amount})},[(t==null?void 0:t.desired_amount)??""]),console.log("formssssss",t);const R=()=>{i(0),n(!0),f({value1:!1,value2:!1})},_=()=>{n(!1),i(0),f({value1:!1,value2:!1})};function I(p){s({...t,[p.target.name]:Number(p.target.value)})}async function g(p){var L,y;try{m(!0);const S=await K.dispatch(de({...t,loan_record_id:X().format("MMDDYYYYHHmmss"),status:"Pending"}));console.log("result.status ",S.status),S.status==200?(await K.dispatch(ue(d.employee_id)),u(Q({open:!0,type:"success",message:"Will be reviewed"})),m(!1),n(!1),i(0),c({})):(f({value1:!1,value2:!1}),s({term:3,desired_amount:0,interest:0,net:0,bi_amortization:0,interest_rate:.05,schedule:[]}),(y=(L=S==null?void 0:S.response)==null?void 0:L.data)!=null&&y.errors?(c(S.response.data.errors),m(!1)):(console.log("result",S),m(!1),c({notification:S.data.response}),u(Q({open:!0,type:"error",message:S.data.response})),setTimeout(()=>{c({})},2e3)),n(!1),m(!1))}catch{m(!1)}}const N=()=>{i(p=>p+1)},M=()=>{i(p=>p-1)},z=()=>{i(0)},C=[{label:"Loan Information",component:o.jsxs(o.Fragment,{children:[o.jsx(pe,{handleClose:_,user:d,form:t,setForm:s}),o.jsxs(xe,{className:"flex-col gap-3 flex",children:[(a==null?void 0:a.notification)&&o.jsx("div",{className:"text-red-500",children:a==null?void 0:a.notification}),o.jsxs(fe,{fullWidth:!0,children:[o.jsx(be,{id:"demo-simple-select-label",children:"Purpose of Borrowing"}),o.jsxs(Se,{labelId:"demo-simple-select-label",id:"demo-simple-select",name:"purpose",label:"Purpose of Borrowing",onChange:p=>s({...t,[p.target.name]:p.target.value}),value:t.purpose??"",children:[o.jsx(w,{selected:!0,disabled:!0}),o.jsx(w,{value:"Medical Bills",children:"Medical Bills"}),o.jsx(w,{value:"Vehicle Financing",children:"Vehicle Financing"}),o.jsx(w,{value:"Home Improvements and Repair",children:"Home Improvements and Repair"}),o.jsx(w,{value:"Parties & Events",children:"Parties & Events"}),o.jsx(w,{value:"Vacation Fund",children:"Vacation Fund"}),o.jsx(w,{value:"Personal Equipments (Gadgets etc.)",children:"Personal Equipments (Gadgets etc.)"}),o.jsx(w,{value:"Family Support",children:"Family Support"})]}),(a==null?void 0:a.purpose)&&o.jsx(he,{children:a.purpose})]}),o.jsx(Ce,{onChange:p=>I(p),error:!!(a!=null&&a.desired_amount),value:(t==null?void 0:t.desired_amount)??"",helperText:(a==null?void 0:a.desired_amount)??"",name:"desired_amount",type:"number",label:"Desired Amount",variant:"outlined",fullWidth:!0})]})]})},{label:"Loan Agreement Template",component:o.jsx(me,{data:t})},{label:"Promissory Note",component:o.jsx(ve,{data:t})}];return o.jsxs(l.Fragment,{children:[o.jsx(k,{variant:"outlined",onClick:R,children:"Create Loan Request"}),o.jsx(ge,{maxWidth:!0,open:e,onClose:_,children:o.jsxs(Z,{sx:{width:1e3},className:"m-10",children:[o.jsx(et,{activeStep:r,orientation:"vertical",children:C.map((p,L)=>o.jsxs(_e,{children:[o.jsx(G,{optional:L===C.length-1?o.jsx(q,{variant:"caption",children:"Last step"}):null,children:p.label}),o.jsxs(Je,{children:[o.jsx(q,{children:p.component}),o.jsxs(Z,{sx:{mb:2},children:[L===C.length-1?o.jsxs("div",{className:"flex flex-col",children:[o.jsx(te,{control:o.jsx(oe,{name:"isPayAll",onChange:y=>f({...b,value2:y.target.checked})}),label:"I Agree"}),o.jsx(k,{disabled:v||!b.value2,variant:"contained",onClick:g,sx:{mt:1,mr:1},children:"SUBMIT"})]}):o.jsxs("div",{className:"flex flex-col",children:[L==0&&o.jsx(k,{disabled:t.purpose==null||t.desired_amount==null||t.desired_amount==""||t.desired_amount>(x??9600),variant:"contained",onClick:N,sx:{mt:1,mr:1},children:"Continue"}),L==1&&o.jsxs(o.Fragment,{children:[o.jsx(te,{control:o.jsx(oe,{name:"isPayAll",onChange:y=>f({...b,value1:y.target.checked})}),label:"I Agree"}),o.jsx(k,{disabled:!b.value1,variant:"contained",onClick:N,sx:{mt:1,mr:1},children:"Continue"})]})]}),o.jsx("div",{className:"flex flex-col mt-3",children:o.jsx(k,{disabled:L===0,onClick:M,sx:{mt:1,mr:1},children:"Back"})})]})]})]},p.label))}),r===C.length&&o.jsxs(ye,{square:!0,elevation:0,sx:{p:3},children:[o.jsx(q,{children:"All steps completed - you're finished"}),o.jsx(k,{onClick:z,sx:{mt:1,mr:1},children:"Reset"})]})]})})]})}export{Dt as default};
