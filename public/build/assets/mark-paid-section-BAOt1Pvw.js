import{a as u,o as p,r as l,c as m,j as r,s as n,e as y}from"./app-BZXu2kkj.js";import{g as _}from"./loan-record-thunk-CKBRNCiH.js";import{B as s}from"./Button-Bcb6Q1HP.js";import"./DefaultPropsProvider-DHU_4z81.js";import"./createSimplePaletteValueFilter-DJTqrogc.js";async function h(a){try{return await u.post("/api/pay_loan_record",a)}catch(t){return t}}const f=window.location.hash.substring(1);f.split("&")[0];const c=p({name:"loan_record_payments",initialState:{loan_record_payments:{data:[]},loan_record_payment:{}},reducers:{setLoanRecordPayments:(a,t)=>{a.loan_record_payments.data=t.payload},setLoanRecordPayment:(a,t)=>{a.loan_record_payment=t.payload}}});c.actions;c.reducer;function g(a){return async function(t,e){return h(a)}}function k({data:a}){const[t,e]=l.useState(!1),o=m();async function i(w){if(window.confirm("Are you sure you want to mark it as paid?")){e(!0);try{await n.dispatch(g({...a,status:"Paid"})),await n.dispatch(_()),e(!1),o(y({open:!0,type:"success",message:"Loan applicant has already been approved!"}))}catch(d){console.error("Error in approving loan:",d),e(!1)}}}return r.jsxs(r.Fragment,{children:[a.status=="Unpaid"&&r.jsx(s,{disabled:t,variant:"contained",onClick:i,autoFocus:!0,fullWidth:!0,children:"MARK AS PAID"}),a.status=="Paid"&&r.jsx(s,{variant:"contained",color:"success",autoFocus:!0,fullWidth:!0,children:"PAID"})]})}export{k as default};
